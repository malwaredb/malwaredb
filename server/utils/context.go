package utils

import (
	"sync"
)

var _globalServerContext *ServerContext = nil

type ServerContext struct {
	ConfigFile *ServerConfigFile
	GlobalWaitGroup *sync.WaitGroup
	FileTypePlugins []FileTypeHandler
}

func GetGlobalContext() *ServerContext {
	if _globalServerContext == nil {
		emptyPlugins := make([]FileTypeHandler, 0)
		_globalServerContext = &ServerContext{nil, &sync.WaitGroup{},emptyPlugins}
	}
	return _globalServerContext
}

func (cntx* ServerContext) SetConfig(cfg *ServerConfigFile) {
	cntx.ConfigFile = cfg
}